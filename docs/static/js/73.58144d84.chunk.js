(this["webpackJsonpmonitor-components-doc-site"]=this["webpackJsonpmonitor-components-doc-site"]||[]).push([[73],{102:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={width:100,height:100}},103:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return l}));var r=n(92),i=n(97),o=n(93),a=function(t){var e=t.viewPort,n=e.end,r=e.start,i=e.yMax,o=e.yMin,a=t.toClipSpace,c=t.size,s=c.width,u=c.height;return{x:Math.abs((a(n.getTime())-a(r.getTime()))/s),y:Math.abs((i-o)/u)}},c=function(t,e,n,i){var o=t.map((function(t){var n=e.find((function(e){var n=e.id;return t.id===n}));if(null==n)throw new Error("data streams must have an associated data stream info.\n         missing the data stream info for data stream id: "+t.id);return Object(r.p)(t,n)}));n.count=function(t){return t.reduce((function(t,e){return t+Math.max(e.length,0)}),0)}(o);var a=n.geometry.attributes,c=a.currPoint,s=a.nextPoint,u=a.segmentColor,d=0,l=0;o.forEach((function(t){t.forEach((function(e,n){var r=n===t.length-1?e:t[n+1],o=e[0],a=e[1],f=e[2],h=e[3],m=e[4],p=r[0],v=r[1];c.array[d]=i(o),c.array[d+1]=a,s.array[d]=i(p),s.array[d+1]=v,u.array[l]=f,u.array[l+1]=h,u.array[l+2]=m,l+=3,d+=2}))})),c.needsUpdate=!0,s.needsUpdate=!0,u.needsUpdate=!0},s=[[0,-.5],[1,-.5],[1,.5],[0,-.5],[1,.5],[0,.5]],u=function(t){var e=t.viewPort,n=t.dataStreams,i=t.dataStreamInfo,o=t.chartSize,u=t.minBufferSize,d=t.bufferFactor,l=t.toClipSpace,f=new r.c,h=Math.max(u,Object(r.o)(n)*d);!function(t,e){t.setAttribute("position",new r.h(new Float32Array(s.flat()),2)),t.setAttribute("currPoint",new r.j(new Float32Array(2*e),2,!1)),t.setAttribute("nextPoint",new r.j(new Float32Array(2*e),2,!1)),t.setAttribute("segmentColor",new r.j(new Uint8Array(3*e),3,!0))}(f,h);var m=a({viewPort:e,toClipSpace:l,size:o}),p=m.x,v=m.y,w=new r.e({vertexShader:"\nprecision highp float;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float width;\nuniform float xPixelDensity;\nuniform float yPixelDensity;\nattribute vec2 currPoint;\nattribute vec2 nextPoint;\nattribute vec2 position;\nattribute vec3 segmentColor;\nvarying vec3 vColor;\n\n// line shader using instanced lines\n// https://wwwtyro.net/2019/11/18/instanced-lines.html for information on this approach\nvoid main() {\n  // Convert the points to pixel coordinates - otherwise out basis vectors won't be perpendicular when\n  // rasterized to the screen.\n  vec2 currPointPx = vec2(currPoint.x / xPixelDensity, currPoint.y / yPixelDensity);\n  vec2 nextPointPx = vec2(nextPoint.x / xPixelDensity, nextPoint.y / yPixelDensity);\n\n  // create the basis vectors of a coordinate space where the x axis is parallel with\n  // the path between currPoint and nextPoint, and the y axis is perpendicular to the\n  // path between currPoint and nextPoint\n  vec2 xBasis = nextPointPx - currPointPx;\n  vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));\n\n  // project the instance segment along the basis vectors\n  vec2 positionPx = currPointPx + xBasis * position.x + yBasis * width * position.y;\n\n  // Convert from pixel coordinates back to model space\n  vec2 positionModel = vec2(positionPx.x * xPixelDensity, positionPx.y * yPixelDensity);\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(positionModel, 0.0, 1.0);\n  vColor = segmentColor;\n}\n",fragmentShader:"\nprecision highp float;\nvarying vec3 vColor;\n\n// Fills in triangles which make up a line segment, with the corresponding color\nvoid main() {\n  gl_FragColor = vec4(vColor, 1.0);\n}\n",side:r.b,transparent:!0,uniforms:{width:{value:1.5},xPixelDensity:{value:p},yPixelDensity:{value:v}}}),g=new r.i(f,w,h);return g.frustumCulled=!1,c(n,i,g,l),g},d=function(t){var e=t.dataStreams,n=t.dataStreamInfo,a=t.chartSize,c=t.container,s=t.viewPort,d=t.minBufferSize,l=t.bufferFactor,f=t.onUpdate,h=new r.l,m=Object(o.a)(s),p=[];return p[1]=u({toClipSpace:m,chartSize:a,dataStreams:e,dataStreamInfo:n,viewPort:s,minBufferSize:d,bufferFactor:l}),p[i.b]=Object(i.c)({dataStreams:e,dataStreamInfo:n,minBufferSize:d,bufferFactor:l,toClipSpace:m}),p.forEach((function(t){return h.add(t)})),Object(r.k)({scene:h,viewPort:s,container:c,toClipSpace:m,onUpdate:f})},l=function(t){var e=t.scene,n=t.dataStreams,s=t.chartSize,u=t.dataStreamInfo,l=t.container,f=t.viewPort,h=t.hasDataChanged,m=t.bufferFactor,p=t.minBufferSize,v=t.onUpdate,w=e.scene.children[1],g=e.scene.children[i.b];return function(t){return t.geometry.attributes.position.array.length/i.a}(g)<Object(r.o)(n)||Object(o.b)(f,e.toClipSpace)?d({dataStreams:n,chartSize:s,dataStreamInfo:u,container:l,viewPort:f,minBufferSize:p,bufferFactor:m,onUpdate:v,thresholds:[]}):(function(t){var e=t.chartSize,n=t.toClipSpace,r=t.lines,i=t.dataStreams,o=t.dataStreamInfo,s=t.viewPort,u=t.hasDataChanged,d=a({viewPort:s,toClipSpace:n,size:e}),l=d.x,f=d.y;r.material.uniforms.xPixelDensity.value=l,r.material.uniforms.yPixelDensity.value=f,u&&c(i,o,r,n)}({lines:w,dataStreams:n,dataStreamInfo:u,chartSize:s,viewPort:f,hasDataChanged:h,toClipSpace:e.toClipSpace}),h&&Object(i.d)(n,u,g,e.toClipSpace),e)}},58:function(t,e,n){"use strict";n.r(e),n.d(e,"monitor_straight_line_segment",(function(){return f}));var r=n(2),i=(n(94),n(89),n(95),n(92),n(99)),o=(n(97),n(100),n(98),n(101),n(103)),a=(n(93),n(102)),c=new Date(2e3,0,0),s=new Date(2e3,0,1),u=s.getTime()-c.getTime(),d={x:new Date(c.getTime()+u/3),y:50},l={x:new Date(c.getTime()+u*(2/3)),y:50},f=function(){function t(t){Object(r.i)(this,t)}return t.prototype.componentDidLoad=function(){var t=this.el.querySelector("#test-container"),e=Object(o.a)({viewPort:{start:c,end:s,yMin:0,yMax:100},dataStreams:[{id:"test-stream",data:[d,l],resolution:0}],dataStreamInfo:[{id:"test-stream",name:"test-stream-name",color:"black"}],chartSize:a.a,container:t,minBufferSize:100,bufferFactor:2,thresholds:[]});i.b.addChartScene(e),i.b.setChartRect(e.id,t.getBoundingClientRect())},t.prototype.render=function(){return Object(r.h)("monitor-webgl-context",null,Object(r.h)("div",{id:"test-container",style:{width:a.a.width+"px",height:a.a.height+"px"}}))},Object.defineProperty(t.prototype,"el",{get:function(){return Object(r.g)(this)},enumerable:!0,configurable:!0}),t}()},89:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return c})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return d}));var r=1e3,i=60*r,o=60*i,a=24*o,c=30*a,s=12*c,u=function(t){if(t<0)throw new Error("Time cannot be negative!");var e=Math.floor(t/1e3),n=Math.floor(e/60),r=Math.floor(n/60);return{day:Math.floor(r/24),hour:r%=24,minute:n%=60,seconds:e%=60}},d=function(t,e,n){var r=n.start,c=n.end;if(e<a){var s=c.getTime()-r.getTime();return s<i?t.toLocaleString("en-US",{minute:"numeric",second:"numeric"}):s<10*i?t.toLocaleString("en-US",{hour:"numeric",minute:"numeric",second:"numeric",hour12:!0}):t.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})}return e<=o?t.toLocaleString("en-US",{hour:"numeric",day:"long",hour12:!0}):e<=a?t.toLocaleString("en-US",{day:"numeric",month:"long"}):t.toLocaleString("en-US",{year:"numeric",month:"long"})}},93:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var r=n(89),i=function(t){var e=t.end.getTime()-t.start.getTime(),n=t.start.getTime()-.25*e,i=function(t){return t<10*r.c?1:t<r.a?r.d/10:t<7*r.a?r.d:t<r.e?r.c:t<30*r.e?30*r.c:r.a}(e);return function(t){return Math.floor((t-n)/i)}},o=function(t,e){return Math.abs(e(t.getTime()))>=Math.pow(10,7)},a=function(t,e){var n=o(t.start,e)||o(t.end,e),r=t.end.getTime()-t.start.getTime(),i=e(t.end.getTime())-e(t.start.getTime());return n||r>i&&i<3e3}},97:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return u}));var r=n(92),i=0,o=function(t){return 0===(null!=t[0]?t[0].resolution:null)?4:6.25},a=2,c=function(t,e,n,i){var o=e.map((function(t){var e=n.find((function(e){var n=e.id;return t.id===n}));if(null==e)throw new Error("data streams must have an associated data stream info.\n         missing the data stream info for data stream id: "+t.id);return Object(r.p)(t,e)})).flat(),c=t.attributes,s=c.position,u=c.pointColor;o.forEach((function(t,e){var n=t[0],r=t[1],o=t[2],c=t[3],d=t[4];s.array[e*a]=i(n),s.array[e*a+1]=r,u.array[3*e]=o,u.array[3*e+1]=c,u.array[3*e+2]=d})),t.setDrawRange(0,o.length),s.needsUpdate=!0,u.needsUpdate=!0},s=function(t){var e=t.toClipSpace,n=t.dataStreams,i=t.dataStreamInfo,s=t.minBufferSize,u=t.bufferFactor,d=Math.max(s,Object(r.o)(n)*u),l=new r.a;!function(t,e){t.setAttribute("position",new r.h(new Float32Array(e*a),a)),t.setAttribute("pointColor",new r.h(new Uint8Array(3*e),3,!0))}(l,d),c(l,n,i,e);var f=new r.f({vertexShader:"\nvarying vec3 vColor;\nattribute vec3 pointColor;\nuniform float pointDiameter;\nuniform float devicePixelRatio;\n\nvoid main() {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position.x, position.y, 0.0, 1.0);\n  gl_PointSize = pointDiameter * devicePixelRatio;\n  vColor = pointColor;\n}\n",fragmentShader:"\nvarying vec3 vColor;\n\nvoid main() {\n  // calculate position such that the center is (0, 0) in a region of [-1, 1] x [-1, 1]\n  vec2 pos = 2.0 * gl_PointCoord.xy - 1.0;\n  // r = distance squared from the origin of the point being rendered\n  float r = dot(pos, pos);\n  if (r > 1.0) {\n    discard;\n  }\n  float alpha = 1.0 - smoothstep(0.5, 1.0, sqrt(r));\n  gl_FragColor = vec4(vColor, alpha);\n}\n",transparent:!0,uniforms:{pointDiameter:{value:o(n)},devicePixelRatio:{value:window.devicePixelRatio}}}),h=new r.d(l,f);return h.frustumCulled=!1,h},u=function(t,e,n,r){n.material.uniforms.pointDiameter.value=o(t),c(n.geometry,t,e,r)}},99:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a}));var r=n(92),i=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height,left:e.left+window.scrollX,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY,top:e.top+window.scrollY,x:e.x+window.scrollX,y:e.y+window.scrollY}},o=function(){function t(t){this.rectMap={},this.canvas=t,this.updateCanvas()}return t.prototype.updateCanvas=function(){this.canvasRect=this.canvas.getBoundingClientRect()},t.prototype.updateChartScene=function(t,e){this.rectMap[t]=e},t.prototype.clipRect=function(t){return this.rectMap[t]?function(t,e){var n=window.devicePixelRatio,r=t.left,i=t.bottom,o=t.width,a=t.height,c=e.height-(i-window.scrollY);return{left:(r-window.scrollX)*n,bottom:c*n,width:o*n,height:a*n}}(this.rectMap[t],this.canvasRect):void 0},t.prototype.removeChartScene=function(t){delete this.rectMap[t]},t}();var a=function(){var t,e,n,i=[],a=function(e){var n=i.find((function(t){return t.id===e}));i=i.filter((function(t){return t.id!==e})),n&&n.dispose(),t.removeChartScene(e),c()},c=function(){e&&(e.setScissorTest(!1),e.clear(),e.setScissorTest(!0),i.forEach(d))},s=function(){if(e&&n){var r="translate("+window.scrollX+"px, "+window.scrollY+"px)";e.domElement.style.transform=r,t.updateCanvas(),c()}},u=function(){e&&n&&(!function(t){var e=t.domElement,n=Math.floor(e.clientWidth*window.devicePixelRatio)||0,r=Math.floor(e.clientHeight*window.devicePixelRatio)||0,i=e.width!==n||e.height!==r;i&&t.setSize(n,r,!1)}(e),t.updateCanvas(),c())},d=function(r){var i=t.clipRect(r.id);e&&n&&i&&function(t,e,n){var r=e.scene,i=e.camera,o=n.left,a=n.bottom,c=n.width,s=n.height;t.setScissor(o,a,c,s),t.setViewport(o,a,c,s),t.render(r,i)}(e,r,i)};return{initRendering:function(i){t=new o(i),n=i,(e=new r.g({canvas:n,alpha:!0,antialias:!0,preserveDrawingBuffer:!0})).setScissorTest(!0),e.setClearColor(0,0),s(),u(),window.addEventListener("scroll",s),window.addEventListener("resize",u)},dispose:function(){e&&(i.map((function(t){return t.id})).forEach(a),e.dispose()),window.removeEventListener("scroll",s),window.removeEventListener("resize",u)},render:d,addChartScene:function(t){i.push(t)},removeChartScene:a,setChartRect:function(e,n){t.updateChartScene(e,n),c()},syncCameras:function(t,e){i.forEach((function(n){n.updateViewPort(t,e),d(n)}))}}}()}}]);
//# sourceMappingURL=73.58144d84.chunk.js.map