(this["webpackJsonpmonitor-components-doc-site"]=this["webpackJsonpmonitor-components-doc-site"]||[]).push([[22],{108:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var a=n(98),i=Object(a.b)((function(t){return t.x})),r=function(t,e,n){var a=e.start,r=e.end;if(void 0===n&&(n=!0),0===t.length)return[];if(a>t[t.length-1].x)return[];if(r<t[0].x)return[];var o=Math.max(i.left(t,a)-(n?1:0),0),s=Math.min(i.right(t,r)-(n?0:1),t.length-1);return t.slice(o,s+1)}},115:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n(108),i=function(t,e){var n=a.b.left(t,e),i=t[n-1],r=t[n];return i&&r?r:i||r},r=function(t){var e=t.viewPort,n=t.dataStreams,r=t.selectedDate,o=t.allowMultipleDates,s=n.map((function(t){return Object.assign(Object.assign({},t),{data:Object(a.a)(t.data,e,!1)})})).filter((function(t){return t.data.length>0})).map((function(t){var e=t.id,n=t.data;return{streamId:e,point:i(n,r)}}));if(o)return s;var c=s.sort((function(t,e){return Math.abs(t.point.x.getTime()-r.getTime())-Math.abs(e.point.x.getTime()-r.getTime())}));return c.filter((function(t){return t.point.x.getTime()===c[0].point.x.getTime()}))}},41:function(t,e,n){"use strict";n.r(e),n.d(e,"monitor_kpi",(function(){return d}));var a=n(2),i=(n(94),n(95)),r=n(92),o=(n(100),n(98),n(101),n(108),n(115)),s=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var a=Array(t),i=0;for(e=0;e<n;e++)for(var r=arguments[e],o=0,s=r.length;o<s;o++,i++)a[i]=r[o];return a},c=function(t,e,n,a,i,r,o,s){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,a,i,r,o,s],f=0;(c=new Error(e.replace(/%s/g,(function(){return u[f++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}},u=Object(i.a)((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=Object.prototype.hasOwnProperty,a=Array.prototype.splice,i=Object.prototype.toString;function r(t){return i.call(t).slice(8,-1)}var o=Object.assign||function(t,e){return s(e).forEach((function(a){n.call(e,a)&&(t[a]=e[a])})),t},s="function"===typeof Object.getOwnPropertySymbols?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function u(t){return Array.isArray(t)?o(t.constructor(t.length),t):"Map"===r(t)?new Map(t):"Set"===r(t)?new Set(t):t&&"object"===typeof t?o(Object.create(Object.getPrototypeOf(t)),t):t}var f=function(){function t(){this.commands=o({},d),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(t,e){return t===e},this.update.newContext=function(){return(new t).update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(t){this.update.isEquals=t},enumerable:!0,configurable:!0}),t.prototype.extend=function(t,e){this.commands[t]=e},t.prototype.update=function(t,e){var a=this,i="function"===typeof e?{$apply:e}:e;Array.isArray(t)&&Array.isArray(i)||c(!Array.isArray(i),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),c("object"===typeof i&&null!==i,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(this.commands).join(", "));var o=t;return s(i).forEach((function(e){if(n.call(a.commands,e)){var s=t===o;o=a.commands[e](i[e],o,i,t),s&&a.isEquals(o,t)&&(o=t)}else{var c="Map"===r(t)?a.update(t.get(e),i[e]):a.update(t[e],i[e]),f="Map"===r(o)?o.get(e):o[e];a.isEquals(c,f)&&("undefined"!==typeof c||n.call(t,e))||(o===t&&(o=u(t)),"Map"===r(o)?o.set(e,c):o[e]=c)}})),o},t}();e.Context=f;var d={$push:function(t,e,n){return p(e,n,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,n){return p(e,n,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,n,i){return function(t,e){c(Array.isArray(t),"Expected $splice target to be an array; got %s",t),g(e.$splice)}(e,n),t.forEach((function(t){g(t),e===i&&t.length&&(e=u(i)),a.apply(e,t)})),e},$set:function(t,e,n){return function(t){c(1===Object.keys(t).length,"Cannot have more than one key in an object with $set")}(n),t},$toggle:function(t,e){h(t,"$toggle");var n=t.length?u(e):e;return t.forEach((function(t){n[t]=!e[t]})),n},$unset:function(t,e,n,a){return h(t,"$unset"),t.forEach((function(t){Object.hasOwnProperty.call(e,t)&&(e===a&&(e=u(a)),delete e[t])})),e},$add:function(t,e,n,a){return m(e,"$add"),h(t,"$add"),"Map"===r(e)?t.forEach((function(t){var n=t[0],i=t[1];e===a&&e.get(n)!==i&&(e=u(a)),e.set(n,i)})):t.forEach((function(t){e!==a||e.has(t)||(e=u(a)),e.add(t)})),e},$remove:function(t,e,n,a){return m(e,"$remove"),h(t,"$remove"),t.forEach((function(t){e===a&&e.has(t)&&(e=u(a)),e.delete(t)})),e},$merge:function(t,e,n,a){var i,r;return i=e,c((r=t)&&"object"===typeof r,"update(): $merge expects a spec of type 'object'; got %s",r),c(i&&"object"===typeof i,"update(): $merge expects a target of type 'object'; got %s",i),s(t).forEach((function(n){t[n]!==e[n]&&(e===a&&(e=u(a)),e[n]=t[n])})),e},$apply:function(t,e){var n;return c("function"===typeof(n=t),"update(): expected spec of $apply to be a function; got %s.",n),t(e)}},l=new f;function p(t,e,n){c(Array.isArray(t),"update(): expected target of %s to be an array; got %s.",n,t),h(e[n],n)}function h(t,e){c(Array.isArray(t),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",e,t)}function g(t){c(Array.isArray(t),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",t)}function m(t,e){var n=r(t);c("Map"===n||"Set"===n,"update(): %s expects a target of type Set or Map; got %s",e,n)}e.isEquals=l.update.isEquals,e.extend=l.extend,e.default=l.update,e.default.default=t.exports=o(e.default,e)})),f=Object(i.c)(u),d=function(){function t(t){var e=this;Object(a.i)(this,t),this.isEditing=!1,this.isLoading=!1,this.isFetching=!1,this.errorMap={},this.annotations=void 0,this.names=[],this.onChangeLabel=function(t){var n=t.streamId,a=t.name;e.names=function(t,e,n){var a,i=t.findIndex((function(t){return t.id===n}));return i>=0?f(t,((a={})[i]={$set:{id:n,name:e}},a)):s(t,[{name:e,id:n}])}(e.names,a,n),e.onWidgetUpdated()},this.getContainerStyle=function(){return 1===e.config.dataStreamInfo.length?{alignItems:"center",justifyContent:"center"}:{alignItems:"center"}},this.getBpValueBaseStyle=function(t){var n=e.config.dataStreamInfo.length,a="45%";return(1===n||n%2!==0&&n-1===t)&&(a="unset"),{flexBasis:5===n?"31%":"50%",maxWidth:a}},this.setLatestPoint=function(t){e.latestPoint=t},this.getThresholds=function(){return e.annotations&&e.annotations.y?e.annotations.y.filter(r.n):[]},this.widgetUpdated=Object(a.f)(this,"widgetUpdated",7)}return t.prototype.onWidgetUpdated=function(){var t=this,e=this.config,n={id:e.id,dataStreamInfo:e.dataStreamInfo.map((function(e){var n=t.names.find((function(t){var n=t.id;return e.id===n})),a=null!=n?n.name:e.name;return Object.assign(Object.assign({},e),{name:a})}))};this.widgetUpdated.emit(n)},t.prototype.render=function(){var t=this,e=this.config.dataStreamInfo,n=e.length>1,i=Object(o.a)({viewPort:this.config.viewPort,dataStreams:this.data,selectedDate:this.config.viewPort.end,allowMultipleDates:!0}),r=this.isLoading&&this.data.every((function(t){return 0===t.data.length}));return Object(a.h)("monitor-size-provider",{size:this.config.size,renderFunc:function(o){var s=o.width,c=o.height;return Object(a.h)("div",{class:"container"},Object(a.h)("div",{class:"value-container",style:t.getContainerStyle()},e.map((function(e,o){var u=i.find((function(t){return t.streamId===e.id}));return Object(a.h)("monitor-kpi-base",{key:e.id,style:t.getBpValueBaseStyle(o),streamInfo:e,viewPort:t.config.viewPort,data:t.data[o],isEditing:t.isEditing,width:s,height:c,isLoading:r,isFetching:t.isFetching,errorMap:t.errorMap,miniVersion:n,onChangeLabel:t.onChangeLabel,setLatestPoint:t.setLatestPoint,activePoint:u,thresholds:t.getThresholds()})}))),!n&&t.latestPoint&&Object(a.h)("time",{class:"footer",dateTime:null!=t.latestPoint?t.latestPoint.x.toISOString():""},"Latest Value "+t.latestPoint.x.toLocaleString()),n&&Object(a.h)("div",{class:"footer"},"Latest Values"))}})},t}();d.style=".container{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%;overflow:auto;padding:0 10px 0 10px;-ms-overflow-style:none;scrollbar-width:none}.container::-webkit-scrollbar{display:none}.value-container{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}monitor-kpi-base{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;padding:0 5px 0 5px}.footer{margin:0 10px 5px 0;font-size:1.2rem;font-weight:400;color:var(--value-component-font-color-tertiary);overflow:hidden;text-align:right;text-overflow:ellipsis;-webkit-animation:fadeIn 1000ms linear;animation:fadeIn 1000ms linear}"}}]);
//# sourceMappingURL=stencil-monitor-kpi-entry-js.9ff30469.chunk.js.map