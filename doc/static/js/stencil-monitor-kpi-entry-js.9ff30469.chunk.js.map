{"version":3,"sources":["../node_modules/@amzn/bp-components/dist/esm-es5/getVisibleData-38130c2d.js","../node_modules/@amzn/bp-components/dist/esm-es5/activePoints-617217f7.js","../node_modules/@amzn/bp-components/dist/esm-es5/monitor-kpi.entry.js"],"names":["pointBisector","bisector","p","x","getVisibleData","data","_a","includeBoundaryPoints","start","end","length","startIndex","Math","max","left","endIndex","min","right","slice","closestPoint","dataPoints","date","idx","leftPoint","rightPoint","activePoints","viewPort","dataStreams","selectedDate","allowMultipleDates","points","map","stream","Object","assign","filter","id","streamId","point","sortedPoints","sort","p1","p2","abs","getTime","__spreadArrays","s","i","il","arguments","r","Array","k","a","j","jl","browser","condition","format","b","c","d","e","f","error","undefined","Error","args","argIndex","replace","name","framesToPop","immutabilityHelper","createCommonjsModule","module","exports","defineProperty","value","hasOwnProperty","prototype","splice","toString","type","obj","call","target","source","getAllKeys","forEach","key","getOwnPropertySymbols","keys","concat","copy","object","isArray","constructor","Map","Set","create","getPrototypeOf","Context","this","commands","defaultCommands","update","bind","extend","isEquals","y","newContext","get","set","enumerable","configurable","directive","fn","$spec","_this","spec","$apply","join","nextObject","objectWasNextObject","nextValueForKey","nextObjectValue","$push","invariantPushAndUnshift","$unshift","$splice","originalObject","invariantSplice","invariantSplices","apply","$set","_nextObject","invariantSet","$toggle","targets","invariantSpecArray","nextObjectCopy","$unset","_spec","$add","values","invariantMapOrSet","has","add","$remove","delete","$merge","specValue","original","defaultContext","command","typeOfTarget","default","unwrapExports","MonitorKpi","hostRef","_this_1","registerInstance","isEditing","isLoading","isFetching","errorMap","annotations","names","onChangeLabel","_b","index","findIndex","o","updateName","onWidgetUpdated","getContainerStyle","config","dataStreamInfo","alignItems","justifyContent","getBpValueBaseStyle","dataStreamInfoLength","maxWidth","flexBasis","setLatestPoint","latestPoint","getThresholds","isThreshold","widgetUpdated","createEvent","configUpdate","info","nameValue","find","nameId","emit","render","miniVersion","isLoadingWithNoDataPresent","every","h","size","renderFunc","width","height","class","style","streamInfo","activePoint","thresholds","dateTime","toISOString","toLocaleString"],"mappings":"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","file":"static/js/stencil-monitor-kpi-entry-js.9ff30469.chunk.js","sourcesContent":["import { b as bisector } from './index-085eab52.js';\n// By doing the mapping to a date within the bisector\n// we eliminate the need to iterate over the entire data.\n// (As opposed to mapping entire data to an array of dates)\nvar pointBisector = bisector(function (p) { return p.x; });\n/**\n * Get Visible Data\n *\n * Returns the data points which are required for the chart to correctly render.\n * This assumes linear interpolation between points\n * TODO(btd): Support other interpolation methods\n *\n * NOTE: It's possible to have data not in the viewport which is required for the chart to render\n * it's fully visualization correctly. For Instance, even if a point isn't visible in the viewport, it may\n * be used within interpolation to calculate a path between the points which is within the viewport.\n *\n * Different interpolation methods need larger amount of context around the viewport to correctly render\n * the chart visualization.\n */\nvar getVisibleData = function (data, _a, \n// Whether we want to include a single point to the right, and to the left of the provide viewport.\n// This is useful when rendering lines since you need to connect a point to a point outside of the viewport\n// to fully render the data correctly.\nincludeBoundaryPoints) {\n    var start = _a.start, end = _a.end;\n    if (includeBoundaryPoints === void 0) { includeBoundaryPoints = true; }\n    // If there is no data\n    if (data.length === 0) {\n        return [];\n    }\n    // If all data is before the view port\n    if (start > data[data.length - 1].x) {\n        return [];\n    }\n    // If all data is after the view port\n    if (end < data[0].x) {\n        return [];\n    }\n    // Otherwise return all the data within the viewport, plus an additional single data point that falls outside of\n    // the viewport in either direction.\n    var startIndex = Math.max(pointBisector.left(data, start) - (includeBoundaryPoints ? 1 : 0), 0);\n    var endIndex = Math.min(pointBisector.right(data, end) - (includeBoundaryPoints ? 0 : 1), data.length - 1);\n    return data.slice(startIndex, endIndex + 1);\n};\nexport { getVisibleData as g, pointBisector as p };\n","import { g as getVisibleData, p as pointBisector } from './getVisibleData-38130c2d.js';\n/**\n * Closest Points\n *\n * Returns the closest point to the left, and right of a\n * given point in time..\n */\nvar closestPoint = function (dataPoints, date) {\n    var idx = pointBisector.left(dataPoints, date);\n    var leftPoint = dataPoints[idx - 1];\n    var rightPoint = dataPoints[idx];\n    // If only the left, or only the right point exist, go ahead and just return it.\n    if (!leftPoint || !rightPoint) {\n        return leftPoint || rightPoint;\n    }\n    // We are right bias because the interval between two points is the time span for the point on the right.\n    return rightPoint;\n};\n/**\n * Get Active Points\n *\n * Returns at most one point per data stream - for each data stream, it finds the point which is\n * 1. within the given view port\n * 2. closest to the provided `selectedDate`\n *\n * Additionally, if `allowMultipleDates` is false, it will only return the points which are the closest\n * to the `selectedDate`. i.e. if you have 10 points that are all equally distant from the `selectedDate`,\n * all 10 are returned.\n *\n * However if you have 10 points of different dates, only the closest point would be returned.\n */\nvar activePoints = function (_a) {\n    var viewPort = _a.viewPort, dataStreams = _a.dataStreams, selectedDate = _a.selectedDate, allowMultipleDates = _a.allowMultipleDates;\n    // Filter down the data streams to only contain data within the viewport\n    var streamsWithinViewPort = dataStreams\n        .map(function (stream) { return (Object.assign(Object.assign({}, stream), { data: getVisibleData(stream.data, viewPort, false) })); })\n        .filter(function (stream) { return stream.data.length > 0; });\n    // Find the closest point to the selected date for each stream\n    var points = streamsWithinViewPort.map(function (_a) {\n        var id = _a.id, data = _a.data;\n        return ({\n            streamId: id,\n            point: closestPoint(data, selectedDate),\n        });\n    });\n    if (allowMultipleDates) {\n        return points;\n    }\n    // Sort in ascending order by there distance from the selected date\n    var sortedPoints = points.sort(function (p1, p2) {\n        var p1Distance = Math.abs(p1.point.x.getTime() - selectedDate.getTime());\n        var p2Distance = Math.abs(p2.point.x.getTime() - selectedDate.getTime());\n        return p1Distance - p2Distance;\n    });\n    // Filter such that only the points with a date equal to the date of the point which is closest to the selected date.\n    return sortedPoints.filter(function (p) { return p.point.x.getTime() === sortedPoints[0].point.x.getTime(); });\n};\nexport { activePoints as a };\n","var __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { r as registerInstance, d as createEvent, h } from './index-326b73e4.js';\nimport './types-ef93b8eb.js';\nimport { a as createCommonjsModule, u as unwrapExports } from './_commonjsHelpers-17042db9.js';\nimport { i as isThreshold } from './utils-ef59b734.js';\nimport './v4-1d709f5b.js';\nimport './index-085eab52.js';\nimport './predicates-4851c065.js';\nimport './getVisibleData-38130c2d.js';\nimport { a as activePoints } from './activePoints-617217f7.js';\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\nvar invariant = function (condition, format, a, b, c, d, e, f) {\n    if (!condition) {\n        var error;\n        if (format === undefined) {\n            error = new Error('Minified exception occurred; use the non-minified dev environment ' +\n                'for the full error message and additional helpful warnings.');\n        }\n        else {\n            var args = [a, b, c, d, e, f];\n            var argIndex = 0;\n            error = new Error(format.replace(/%s/g, function () { return args[argIndex++]; }));\n            error.name = 'Invariant Violation';\n        }\n        error.framesToPop = 1; // we don't care about invariant's own frame\n        throw error;\n    }\n};\nvar browser = invariant;\nvar immutabilityHelper = createCommonjsModule(function (module, exports) {\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var splice = Array.prototype.splice;\n    var toString = Object.prototype.toString;\n    function type(obj) {\n        return toString.call(obj).slice(8, -1);\n    }\n    var assign = Object.assign || /* istanbul ignore next */ (function (target, source) {\n        getAllKeys(source).forEach(function (key) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key];\n            }\n        });\n        return target;\n    });\n    var getAllKeys = typeof Object.getOwnPropertySymbols === 'function'\n        ? function (obj) { return Object.keys(obj).concat(Object.getOwnPropertySymbols(obj)); }\n        /* istanbul ignore next */\n        : function (obj) { return Object.keys(obj); };\n    function copy(object) {\n        return Array.isArray(object)\n            ? assign(object.constructor(object.length), object)\n            : (type(object) === 'Map')\n                ? new Map(object)\n                : (type(object) === 'Set')\n                    ? new Set(object)\n                    : (object && typeof object === 'object')\n                        ? assign(Object.create(Object.getPrototypeOf(object)), object)\n                        /* istanbul ignore next */\n                        : object;\n    }\n    var Context = /** @class */ (function () {\n        function Context() {\n            this.commands = assign({}, defaultCommands);\n            this.update = this.update.bind(this);\n            // Deprecated: update.extend, update.isEquals and update.newContext\n            this.update.extend = this.extend = this.extend.bind(this);\n            this.update.isEquals = function (x, y) { return x === y; };\n            this.update.newContext = function () { return new Context().update; };\n        }\n        Object.defineProperty(Context.prototype, \"isEquals\", {\n            get: function () {\n                return this.update.isEquals;\n            },\n            set: function (value) {\n                this.update.isEquals = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Context.prototype.extend = function (directive, fn) {\n            this.commands[directive] = fn;\n        };\n        Context.prototype.update = function (object, $spec) {\n            var _this = this;\n            var spec = (typeof $spec === 'function') ? { $apply: $spec } : $spec;\n            if (!(Array.isArray(object) && Array.isArray(spec))) {\n                browser(!Array.isArray(spec), 'update(): You provided an invalid spec to update(). The spec may ' +\n                    'not contain an array except as the value of $set, $push, $unshift, ' +\n                    '$splice or any custom command allowing an array value.');\n            }\n            browser(typeof spec === 'object' && spec !== null, 'update(): You provided an invalid spec to update(). The spec and ' +\n                'every included key path must be plain objects containing one of the ' +\n                'following commands: %s.', Object.keys(this.commands).join(', '));\n            var nextObject = object;\n            getAllKeys(spec).forEach(function (key) {\n                if (hasOwnProperty.call(_this.commands, key)) {\n                    var objectWasNextObject = object === nextObject;\n                    nextObject = _this.commands[key](spec[key], nextObject, spec, object);\n                    if (objectWasNextObject && _this.isEquals(nextObject, object)) {\n                        nextObject = object;\n                    }\n                }\n                else {\n                    var nextValueForKey = type(object) === 'Map'\n                        ? _this.update(object.get(key), spec[key])\n                        : _this.update(object[key], spec[key]);\n                    var nextObjectValue = type(nextObject) === 'Map'\n                        ? nextObject.get(key)\n                        : nextObject[key];\n                    if (!_this.isEquals(nextValueForKey, nextObjectValue)\n                        || typeof nextValueForKey === 'undefined'\n                            && !hasOwnProperty.call(object, key)) {\n                        if (nextObject === object) {\n                            nextObject = copy(object);\n                        }\n                        if (type(nextObject) === 'Map') {\n                            nextObject.set(key, nextValueForKey);\n                        }\n                        else {\n                            nextObject[key] = nextValueForKey;\n                        }\n                    }\n                }\n            });\n            return nextObject;\n        };\n        return Context;\n    }());\n    exports.Context = Context;\n    var defaultCommands = {\n        $push: function (value, nextObject, spec) {\n            invariantPushAndUnshift(nextObject, spec, '$push');\n            return value.length ? nextObject.concat(value) : nextObject;\n        },\n        $unshift: function (value, nextObject, spec) {\n            invariantPushAndUnshift(nextObject, spec, '$unshift');\n            return value.length ? value.concat(nextObject) : nextObject;\n        },\n        $splice: function (value, nextObject, spec, originalObject) {\n            invariantSplices(nextObject, spec);\n            value.forEach(function (args) {\n                invariantSplice(args);\n                if (nextObject === originalObject && args.length) {\n                    nextObject = copy(originalObject);\n                }\n                splice.apply(nextObject, args);\n            });\n            return nextObject;\n        },\n        $set: function (value, _nextObject, spec) {\n            invariantSet(spec);\n            return value;\n        },\n        $toggle: function (targets, nextObject) {\n            invariantSpecArray(targets, '$toggle');\n            var nextObjectCopy = targets.length ? copy(nextObject) : nextObject;\n            targets.forEach(function (target) {\n                nextObjectCopy[target] = !nextObject[target];\n            });\n            return nextObjectCopy;\n        },\n        $unset: function (value, nextObject, _spec, originalObject) {\n            invariantSpecArray(value, '$unset');\n            value.forEach(function (key) {\n                if (Object.hasOwnProperty.call(nextObject, key)) {\n                    if (nextObject === originalObject) {\n                        nextObject = copy(originalObject);\n                    }\n                    delete nextObject[key];\n                }\n            });\n            return nextObject;\n        },\n        $add: function (values, nextObject, _spec, originalObject) {\n            invariantMapOrSet(nextObject, '$add');\n            invariantSpecArray(values, '$add');\n            if (type(nextObject) === 'Map') {\n                values.forEach(function (_a) {\n                    var key = _a[0], value = _a[1];\n                    if (nextObject === originalObject && nextObject.get(key) !== value) {\n                        nextObject = copy(originalObject);\n                    }\n                    nextObject.set(key, value);\n                });\n            }\n            else {\n                values.forEach(function (value) {\n                    if (nextObject === originalObject && !nextObject.has(value)) {\n                        nextObject = copy(originalObject);\n                    }\n                    nextObject.add(value);\n                });\n            }\n            return nextObject;\n        },\n        $remove: function (value, nextObject, _spec, originalObject) {\n            invariantMapOrSet(nextObject, '$remove');\n            invariantSpecArray(value, '$remove');\n            value.forEach(function (key) {\n                if (nextObject === originalObject && nextObject.has(key)) {\n                    nextObject = copy(originalObject);\n                }\n                nextObject.delete(key);\n            });\n            return nextObject;\n        },\n        $merge: function (value, nextObject, _spec, originalObject) {\n            invariantMerge(nextObject, value);\n            getAllKeys(value).forEach(function (key) {\n                if (value[key] !== nextObject[key]) {\n                    if (nextObject === originalObject) {\n                        nextObject = copy(originalObject);\n                    }\n                    nextObject[key] = value[key];\n                }\n            });\n            return nextObject;\n        },\n        $apply: function (value, original) {\n            invariantApply(value);\n            return value(original);\n        },\n    };\n    var defaultContext = new Context();\n    exports.isEquals = defaultContext.update.isEquals;\n    exports.extend = defaultContext.extend;\n    exports.default = defaultContext.update;\n    // @ts-ignore\n    exports.default.default = module.exports = assign(exports.default, exports);\n    // invariants\n    function invariantPushAndUnshift(value, spec, command) {\n        browser(Array.isArray(value), 'update(): expected target of %s to be an array; got %s.', command, value);\n        invariantSpecArray(spec[command], command);\n    }\n    function invariantSpecArray(spec, command) {\n        browser(Array.isArray(spec), 'update(): expected spec of %s to be an array; got %s. ' +\n            'Did you forget to wrap your parameter in an array?', command, spec);\n    }\n    function invariantSplices(value, spec) {\n        browser(Array.isArray(value), 'Expected $splice target to be an array; got %s', value);\n        invariantSplice(spec.$splice);\n    }\n    function invariantSplice(value) {\n        browser(Array.isArray(value), 'update(): expected spec of $splice to be an array of arrays; got %s. ' +\n            'Did you forget to wrap your parameters in an array?', value);\n    }\n    function invariantApply(fn) {\n        browser(typeof fn === 'function', 'update(): expected spec of $apply to be a function; got %s.', fn);\n    }\n    function invariantSet(spec) {\n        browser(Object.keys(spec).length === 1, 'Cannot have more than one key in an object with $set');\n    }\n    function invariantMerge(target, specValue) {\n        browser(specValue && typeof specValue === 'object', 'update(): $merge expects a spec of type \\'object\\'; got %s', specValue);\n        browser(target && typeof target === 'object', 'update(): $merge expects a target of type \\'object\\'; got %s', target);\n    }\n    function invariantMapOrSet(target, command) {\n        var typeOfTarget = type(target);\n        browser(typeOfTarget === 'Map' || typeOfTarget === 'Set', 'update(): %s expects a target of type Set or Map; got %s', command, typeOfTarget);\n    }\n});\nvar update = unwrapExports(immutabilityHelper);\n/**\n * Updates the `NameValue` it exists, otherwise creates a new `NameValue`.\n */\nvar updateName = function (names, name, id) {\n    var _b;\n    var index = names.findIndex(function (o) { return o.id === id; });\n    if (index >= 0) {\n        return update(names, (_b = {}, _b[index] = { $set: { id: id, name: name } }, _b));\n    }\n    return __spreadArrays(names, [\n        {\n            name: name,\n            id: id,\n        },\n    ]);\n};\nvar monitorKpiCss = \".container{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%;overflow:auto;padding:0 10px 0 10px;-ms-overflow-style:none;scrollbar-width:none}.container::-webkit-scrollbar{display:none}.value-container{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}monitor-kpi-base{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;padding:0 5px 0 5px}.footer{margin:0 10px 5px 0;font-size:1.2rem;font-weight:400;color:var(--value-component-font-color-tertiary);overflow:hidden;text-align:right;text-overflow:ellipsis;-webkit-animation:fadeIn 1000ms linear;animation:fadeIn 1000ms linear}\";\nvar MonitorKpi = /** @class */ (function () {\n    function MonitorKpi(hostRef) {\n        var _this_1 = this;\n        registerInstance(this, hostRef);\n        this.isEditing = false;\n        this.isLoading = false;\n        this.isFetching = false;\n        this.errorMap = {};\n        this.annotations = undefined;\n        this.names = [];\n        this.onChangeLabel = function (_b) {\n            var streamId = _b.streamId, name = _b.name;\n            _this_1.names = updateName(_this_1.names, name, streamId);\n            _this_1.onWidgetUpdated();\n        };\n        this.getContainerStyle = function () {\n            // When there is one data stream, we want it to be center of the widget\n            // When there is more than one data streams, we want the data values to be side by side and in the middle of the widget.\n            if (_this_1.config.dataStreamInfo.length === 1) {\n                return { alignItems: 'center', justifyContent: 'center' };\n            }\n            return { alignItems: 'center' };\n        };\n        this.getBpValueBaseStyle = function (index) {\n            var dataStreamInfoLength = _this_1.config.dataStreamInfo.length;\n            /**\n             * Because monitor-data-stream-name can expend horizontally all the way to take up 100% of space,\n             * we need to limit it to 45%. The reason why its 45 instead of 50 is that each bp value base has padding\n             * in between, so 45% is a safe number while keeping the order of the value widget group the same.\n             */\n            var maxWidth = '45%';\n            /**\n             * If its only one data stream, we have 100% width for it.\n             * If there is more than one data stream, and it is an odd number of data stream, for the last bp value,\n             * we allow it to expend full width while the rest will have max width and shown side by side.\n             */\n            if (dataStreamInfoLength === 1 || (dataStreamInfoLength % 2 !== 0 && dataStreamInfoLength - 1 === index)) {\n                maxWidth = 'unset';\n            }\n            return {\n                flexBasis: dataStreamInfoLength === 5 ? '31%' : '50%',\n                maxWidth: maxWidth,\n            };\n        };\n        this.setLatestPoint = function (latestPoint) {\n            _this_1.latestPoint = latestPoint;\n        };\n        this.getThresholds = function () { return _this_1.annotations && _this_1.annotations.y ? _this_1.annotations.y.filter(isThreshold) : []; };\n        this.widgetUpdated = createEvent(this, \"widgetUpdated\", 7);\n    }\n    /**\n     * On Widget Updated - Persist `DataStreamInfo`\n     *\n     * Emits an event which persists the current `NameValue[]` state into the\n     * data stream info.\n     */\n    MonitorKpi.prototype.onWidgetUpdated = function () {\n        var _this_1 = this;\n        var _b = this.config, id = _b.id, dataStreamInfo = _b.dataStreamInfo;\n        // Construct the config update with the new names specified.\n        var configUpdate = {\n            id: id,\n            dataStreamInfo: dataStreamInfo.map(function (info) {\n                var nameValue = _this_1.names.find(function (_b) {\n                    var nameId = _b.id;\n                    return info.id === nameId;\n                });\n                var name = nameValue != null ? nameValue.name : info.name;\n                return Object.assign(Object.assign({}, info), { name: name });\n            }),\n        };\n        this.widgetUpdated.emit(configUpdate);\n    };\n    MonitorKpi.prototype.render = function () {\n        var _this_1 = this;\n        var dataStreamInfo = this.config.dataStreamInfo;\n        var miniVersion = dataStreamInfo.length > 1;\n        var points = activePoints({\n            viewPort: this.config.viewPort,\n            dataStreams: this.data,\n            selectedDate: this.config.viewPort.end,\n            allowMultipleDates: true,\n        });\n        var isLoadingWithNoDataPresent = this.isLoading && this.data.every(function (_b) {\n            var data = _b.data;\n            return data.length === 0;\n        });\n        return (h(\"monitor-size-provider\", { size: this.config.size, renderFunc: function (_b) {\n                var width = _b.width, height = _b.height;\n                return (h(\"div\", { class: \"container\" }, h(\"div\", { class: \"value-container\", style: _this_1.getContainerStyle() }, dataStreamInfo.map(function (streamInfo, i) {\n                    var activePoint = points.find(function (p) { return p.streamId === streamInfo.id; });\n                    return (h(\"monitor-kpi-base\", { key: streamInfo.id, style: _this_1.getBpValueBaseStyle(i), streamInfo: streamInfo, viewPort: _this_1.config.viewPort, data: _this_1.data[i], isEditing: _this_1.isEditing, width: width, height: height, isLoading: isLoadingWithNoDataPresent, isFetching: _this_1.isFetching, errorMap: _this_1.errorMap, miniVersion: miniVersion, onChangeLabel: _this_1.onChangeLabel, setLatestPoint: _this_1.setLatestPoint, activePoint: activePoint, thresholds: _this_1.getThresholds() }));\n                })), !miniVersion && _this_1.latestPoint && (h(\"time\", { class: \"footer\", dateTime: _this_1.latestPoint != null ? _this_1.latestPoint.x.toISOString() : '' }, \"Latest Value \" + _this_1.latestPoint.x.toLocaleString())), miniVersion && h(\"div\", { class: \"footer\" }, \"Latest Values\")));\n            } }));\n    };\n    return MonitorKpi;\n}());\nMonitorKpi.style = monitorKpiCss;\nexport { MonitorKpi as monitor_kpi };\n"],"sourceRoot":""}